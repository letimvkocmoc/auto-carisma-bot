<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="../static/styles.css">
    <title>Auto Carisma</title>
</head>
<header>
    <img src="../static/images/logo.jpg" alt="–õ–æ–≥–æ" width="400" height="auto">
</header>
<div class="main">
    <div class="deliner"></div>
    <div class="menu">
        <a href="./orders" class="button">–ó–∞—è–≤–∫–∏</a>
    </div>
    <div class="deliner"></div>
    <div class="calculator-form-main">
        <div class="calculator-form">
            <table class="calculator">
                <tbody>
                <tr>
                    <td>–ê–≤—Ç–æ–º–æ–±–∏–ª—å –≤–≤–æ–∑–∏—Ç</td>
                    <td>
                        <select id="owner">
                            <option value="1">–§–∏–∑–∏—á–µ—Å–∫–æ–µ –ª–∏—Ü–æ (–¥–ª—è –ª–∏—á–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)</option>
                            <option value="2">–§–∏–∑–∏—á–µ—Å–∫–æ–µ –ª–∏—Ü–æ (–¥–ª—è –ø–µ—Ä–µ–ø—Ä–æ–¥–∞–∂–∏)</option>
                            <option value="3">–Æ—Ä–∏–¥–∏—á–µ—Å–∫–æ–µ –ª–∏—Ü–æ</option>

                        </select>
                    </td>
                </tr>
                <tr>
                    <td>–í–æ–∑—Ä–∞—Å—Ç –∞–≤—Ç–æ–º–æ–±–∏–ª—è</td>
                    <td>
                        <select id="age">
                            <option value="0-3">–¥–æ 3 –ª–µ—Ç</option>
                            <option value="3-5">–æ—Ç 3 –¥–æ 5 –ª–µ—Ç</option>
                            <option value="5-7">–æ—Ç 5 –¥–æ 7 –ª–µ—Ç</option>
                            <option value="3">–±–æ–ª–µ–µ 7</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>–¢–∏–ø –¥–≤–∏–≥–∞—Ç–µ–ª—è</td>
                    <td>
                        <select id="engine">
                            <option value="1">–ë–µ–Ω–∑–∏–Ω–æ–≤—ã–π</option>
                            <option value="2">–î–∏–∑–µ–ª—å–Ω—ã–π</option>
                            <option value="3">–ì–∏–±—Ä–∏–¥–Ω—ã–π</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>–ú–æ—â–Ω–æ—Å—Ç—å –¥–≤–∏–≥–∞—Ç–µ–ª—è</td>
                    <td>
                        <input type="text" id="power">
                        <select id="power_unit">
                            <option value="1">–õ–°</option>
                            <option value="2">–∫–í—Ç</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>–û–±—ä–µ–º –¥–≤–∏–≥–∞—Ç–µ–ª—è</td>
                    <td>
                        <input type="text" id="value">
                        <span>—Å–º<sup>3</sup> (1 –ª = 1000 —Å–º<sup>3</sup>)</span>
                    </td>
                </tr>
                <tr>
                    <td>–°—Ç–æ–∏–º–æ—Å—Ç—å –∞–≤—Ç–æ–º–æ–±–∏–ª—è</td>
                    <td>
                        <input type="text" id="price">
                        <select id="curr">
                            <option value="EUR">–ï–≤—Ä–æ</option>
                            <option value="USD">–î–æ–ª–ª–∞—Ä –°–®–ê</option>
                            <option value="JPY">–Ø–ø–æ–Ω—Å–∫–∞—è –ò–µ–Ω–∞</option>
                            <option value="CNY">–ö–∏—Ç–∞–π—Å–∫–∏–π –Æ–∞–Ω—å</option>
                        </select>
                    </td>
                </tr>
                </tbody>
            </table>
            <div class="notice">
                <span style="text-align: left; font-size: 12px; margin: 0px;">*—Ä–∞—Å—Å—á–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è —Å —É—á–µ—Ç–æ–º —Ä–∞—Å—Ö–æ–¥–æ–≤ –ø–æ –Ø–ø–æ–Ω–∏–∏</span><br><br>
            </div>
            <div class="currency">
                <span style="align-items: center">üá∫üá∏ 1 USD = {{ currency['currency']['USD'] }} ‚ÇΩ</span><br>
                <span style="align-items: center">&#127466;&#127482; 1 EUR = {{ currency['currency']['EUR'] }} ‚ÇΩ</span><br>
                <span style="align-items: center">üá™üá∫ 1 CNY = {{ currency['currency']['CNY'] }} ‚ÇΩ</span><br>
                <span style="align-items: center">üáØüáµ 1 JPY = {{ currency['currency']['JPY'] }} ‚ÇΩ</span><br><br>
            </div>
            <button>–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
        </div>
        <div id="result" class="result">
            <h3>–†–∞—Å—Å—á–µ—Ç</h3>
            <p>–°–±–æ—Ä:</p>
            <p>–ù–∞–ª–æ–≥:</p>
            <p>–ù–∞–ª–æ–≥–æ–≤–∞—è —Å—Ç–∞–≤–∫–∞:</p>
            <p>–°–±–æ—Ä —É—Ç–∏–ª–∏–∑–∞—Ü–∏–∏:</p>
            <p>–°–±–æ—Ä —É—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ –∫–∞–ª—å–∫—É–ª—è—Ü–∏—è:</p>
            <p>–ò—Ç–æ–≥–æ:</p>
            <p>–ò—Ç–æ–≥ 2:</p>
        </div>
        <div id="result2" class="result">
            <h3>–†–∞—Å—Å—á–µ—Ç</h3>
            <p>–°–±–æ—Ä:</p>
            <p>–ù–∞–ª–æ–≥:</p>
            <p>–ù–∞–ª–æ–≥–æ–≤–∞—è —Å—Ç–∞–≤–∫–∞:</p>
            <p>–°–±–æ—Ä —É—Ç–∏–ª–∏–∑–∞—Ü–∏–∏:</p>
            <p>–°–±–æ—Ä —É—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ –∫–∞–ª—å–∫—É–ª—è—Ü–∏—è:</p>
            <p>–ò—Ç–æ–≥–æ:</p>
            <p>–ò—Ç–æ–≥ 2:</p>
        </div>
    </div>
</div>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            document.querySelector("button").addEventListener("click", function () {
                var formData = new FormData();
                formData.append("owner", document.getElementById("owner").value);
                formData.append("age", document.getElementById("age").value);
                formData.append("engine", document.getElementById("engine").value);
                formData.append("power", document.getElementById("power").value);
                formData.append("power_unit", document.getElementById("power_unit").value);
                formData.append("value", document.getElementById("value").value);
                formData.append("price", document.getElementById("price").value);
                formData.append("curr", document.getElementById("curr").value);
                formData.append("isEmbed", "1");
                formData.append("lang", "ru");

                fetch("https://calcus.ru/calculate/Customs", {
                    method: "POST",
                    body: formData
                })
                    .then(response => {
                        if (response.ok) {
                            console.log("Request successful!");
                            return response.json(); // –ü–∞—Ä—Å–∏–º –æ—Ç–≤–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON
                        }
                        throw new Error("Request failed with status " + response.status);
                    })
                    .then(data => {
                        console.log("Response content:");
                        console.log(data);
                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ –±–ª–æ–∫ result
                        var resultBlock = document.getElementById("result");
                        if (!resultBlock) {
                            // –ï—Å–ª–∏ –±–ª–æ–∫–∞ result –Ω–µ—Ç, —Å–æ–∑–¥–∞–µ–º –µ–≥–æ
                            resultBlock = document.createElement("div");
                            resultBlock.id = "result";
                            resultBlock.className = "result";
                            document.body.appendChild(resultBlock); // –î–æ–±–∞–≤–ª—è–µ–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
                        }

                        // –§–æ—Ä–º–∏—Ä—É–µ–º HTML –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
                        var resultHTML = `
                    <h3>–†–∞—Å—Å—á–µ—Ç</h3>
                    <p>–°–±–æ—Ä: ${data.sbor} ‚ÇΩ</p>
                    <p>–ù–∞–ª–æ–≥: ${data.tax} ‚ÇΩ</p>
                    <p>–ù–∞–ª–æ–≥–æ–≤–∞—è —Å—Ç–∞–≤–∫–∞: ${data.tax_k} ‚ÇΩ</p>
                    <p>–°–±–æ—Ä —É—Ç–∏–ª–∏–∑–∞—Ü–∏–∏: ${data.util} ‚ÇΩ</p>
                    <p>–°–±–æ—Ä —É—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ –∫–∞–ª—å–∫—É–ª—è—Ü–∏—è: ${data.util_k} ‚ÇΩ</p>
                    <p>–ò—Ç–æ–≥–æ: ${data.total} ‚ÇΩ</p>
                    <p><b>–ò—Ç–æ–≥–æ 2: ${data.total2} ‚ÇΩ</b></p>
                `;
                        // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –±–ª–æ–∫–∞ result
                        resultBlock.innerHTML = resultHTML;
                    })
                    .catch(error => {
                        console.error("Error:", error);
                    });
            });
        });
    </script>
<footer>
    <div class="footer">
        <span>–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫: korneev.dev</span>
    </div>
</footer>